# This is a basic workflow to help you get started with Actions

name: CI

# Controls when the action will run. Triggers the workflow on push or pull request
# events but only for the main branch
on:
  push:
    branches: [ main ]
  pull_request:
    branches: [ main ]

# A workflow run is made up of one or more jobs that can run sequentially or in parallel
jobs:
  # This workflow contains a single job called "build"
  build:
    # The type of runner that the job will run on
    runs-on: ubuntu-latest

    # Steps represent a sequence of tasks that will be executed as part of the job
    steps:
    # Checks-out your repository under $GITHUB_WORKSPACE, so your job can access it
    - uses: actions/checkout@v2

    - name: Delete Package Versions
      uses: actions/delete-package-versions@v1.0.2
      with:
        # Comma separated string of package version ids to delete.
        package-version-ids: ""
        # Owner of the repo containing the package version to delete. Defaults to the owner of the repo running the action.

        owner: "Zimmergren"
        # Repo containing the package version to delete. Defaults to the repo running the action.

        repo: "https://github.com/Zimmergren/LogAnalytics.Client"
        # Name of the package containing the version to delete. Required if dynamically deleting oldest versions.

        package-name: "LogAnalytics.Client"
        # Number of versions to delete starting with the oldest version. Defaults to 1.

        num-old-versions-to-delete: 1
        # Token with the necessary scopes to delete package versions. If num-old-versions-to-delete is used the token also needs the read packages scope. Defaults to github.token scoped to the repo running the action. To delete package versions of a package outside the repo the action is running in use a Personal Access Token stored as a secret.

        token: ${{ github.token }}
